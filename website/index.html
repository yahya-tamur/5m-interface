<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="./roboto.css" rel="stylesheet" />
    <link href="./theme.css" rel="stylesheet" />
    <script src="./bundle.js"></script>
  </head>

  <style>
    :root {
      --md-list-item-label-text-color: var(--md-sys-color-primary);
      --md-list-item-trailing-supporting-text-size: 18px;
    }

    [slot="headline"] {
      font-weight: 700;
    }
    #sublist1 [slot="trailing-supporting-text"] {
      width: 100px;
      text-align: end;
    }
    #sublist3 [slot="trailing-supporting-text"] {
      width: 80px;
      text-align: end;
    }

    @media screen and (max-width: 700px) {
      #sublist4 {
        display: none;
      }
    }
  </style>
  <body
    style="
      background-color: var(--md-sys-color-surface-container);
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 0;
      height: 100vh;
    "
  >
    <div
      style="
        display: flex;
        flex-direction: column;
        width: calc(100% - 50px);
        height: calc(100% - 50px);
        border-radius: 28px;
        margin: auto;
        background-color: var(--md-sys-color-surface);
      "
    >
      <md-list
        id="list"
        style="margin: 10px 20px 0px 20px; border-radius: 28px"
      >
        <md-list-item id="disconnected-message" style="display: none">
          <div slot="headline">
            Disconnected. Double check the printer is on and this ip address is
            correct.
          </div>
          <div slot="trailing-supporting-text">
            <div>
              <md-outlined-text-field
                placeholder="Printer IP"
                id="ip-input"
                style="width: 160px"
              ></md-outlined-text-field>
              <md-outlined-button style="margin: 8px" onclick="refreshbutton()"
                >Refresh</md-outlined-button
              >
            </div>
          </div>
        </md-list-item>

        <md-list-item>
          <div slot="headline">Update Interval</div>
          <div
            slot="trailing-supporting-text"
            style="
              display: inline-flex;
              flex-direction: row-reverse;
              width: 330px;
              text-align: end;
            "
          >
            <md-slider
              id="slider"
              step="1000"
              min="0"
              max="30000"
              value="2000"
            ></md-slider>
            <div id="sliderLabel" style="display: flex; align-items: center">
              2 seconds
            </div>
            <md-outlined-button
              style="display: none; margin-right: 20px"
              id="updateButton"
              onclick="fill_data()"
              >Update</md-outlined-button
            >
          </div>
        </md-list-item>
        <md-list-item>
          <div style="display: flex; justify-content: space-around">
            <md-list id="sublist1" style="{width:" 300;}>
              <md-list-item>
                <div slot="headline">Nozzle Temperature</div>
                <div slot="trailing-supporting-text" id="temp0">222/222</div>
              </md-list-item>
              <md-list-item>
                <div slot="headline">Bed Temperature</div>
                <div slot="trailing-supporting-text" id="temp1">1</div>
              </md-list-item>
            </md-list>
            <md-list id="sublist3">
              <md-list-item>
                <div slot="headline">Progress (bytes)</div>
                <div slot="trailing-supporting-text" id="byte-progress-text">
                  90/100
                </div>
              </md-list-item>
              <md-list-item>
                <div slot="headline">Progress (layers)</div>
                <div slot="trailing-supporting-text" id="layer-progress-text">
                  222/333
                </div>
              </md-list-item>
            </md-list>
            <md-list
              id="sublist4"
              style="flex: 1 1 auto; max-width: 300px; margin-left: 10px"
            >
              <md-list-item>
                <md-linear-progress
                  id="byte-progress"
                  value="0.5"
                  style="margin: 7px 0px; width: 100%"
                ></md-linear-progress>
              </md-list-item>
              <md-list-item>
                <md-linear-progress
                  id="layer-progress"
                  value="0"
                  style="margin: 7px 0px; width: 100%"
                ></md-linear-progress>
              </md-list-item>
            </md-list>
          </div>
        </md-list-item>
        <md-list-item>
          <div slot="headline">Current File</div>
          <div slot="trailing-supporting-text" id="file">1</div>
        </md-list-item>
        <md-list-item>
          <div style="display: flex; justify-content: center">
            <md-outlined-button
              id="light"
              style="margin-right: 20px"
              onclick="toggle_light()"
              >Toggle Light</md-outlined-button
            >
            <md-outlined-button id="pause" onclick="pause()"
              >Pause</md-outlined-button
            >
          </div>
        </md-list-item>
        <md-list-item id="image-error-message" style="display: none">
          <div slot="headline">
            Camera feed didn't load. Make sure it's not open elsewhere.
          </div>

          <div slot="trailing-supporting-text" style="width: 250px">
            <md-outlined-button
              onclick="retry_camera()"
              id="retry-camera"
              style="margin-right: 20px"
              >Retry</md-outlined-button
            >
            <md-outlined-button onclick="hide_camera()"
              >Hide Camera
            </md-outlined-button>
          </div>
        </md-list-item>
        <md-list-item id="show-camera-message" style="display: none">
          <div id="show-camera" style="display: flex; justify-content: center">
            <md-outlined-button onclick="show_camera()"
              >Show Camera
            </md-outlined-button>
          </div>
        </md-list-item>
      </md-list>

      <div style="display: flex; overflow: hidden; margin: 0px 20px 20px 20px">
        <img
          id="stream"
          src=""
          style="height: 100%; object-fit: contain; flex: 1 1 auto"
        />
      </div>
    </div>

    <md-dialog id="pause-alert">
      <form slot="content" id="form-id" method="dialog">
        Are you sure? You will need to click resume at the printer.
      </form>
      <div slot="actions">
        <md-text-button form="form-id" value="cancel">Cancel</md-text-button>
        <md-text-button form="form-id" value="ok">Ok</md-text-button>
      </div>
    </md-dialog>
    <md-dialog id="pause-confirm">
      <form slot="content" id="pause-confirm-form" method="dialog">
        Pause signal sent.
      </form>
    </md-dialog>
  </body>
  <script src="./update.js"></script>
</html>
